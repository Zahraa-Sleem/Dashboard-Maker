@*@model DashboardMaker.Models.ColorPalette

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <form method="post" asp-action="CreateColorPalette">
                <div class="form-group">
                    <label asp-for="Name" class="control-label">Color Palette Name</label>
                    <input asp-for="Name" type="text" class="form-control" />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>

                <div class="form-group" id="colorInputs">
                    <label for="Colors">Colors</label>
                    <div class="input-group color-input-group">
                        <label for="Colors[0].HexadecimalValue" class="sr-only">Color 0</label>
                        <input type="color" name="Colors[0].HexadecimalValue" value="#000000" class="form-control" />
                        <div class="input-group-append">
                            <button type="button" class="btn btn-outline-danger deleteColor" data-index="0">X</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <button type="button" id="addColor" class="btn btn-success">Add Color</button>
                </div>

                <button type="submit" class="btn btn-dark">Create Color Palette</button>
            </form>
        </div>
    </div>
</div>

@section scripts {
    <script>
        $(document).ready(function () {
            var colorIndex = 1; // Start with 1 because there's already one color input

            function addColorInput(index, color) {
                var colorInputGroup = $("<div class='input-group color-input-group'></div>");
                var newColorInput = $("<input type='color' name='Colors[" + index + "].HexadecimalValue' value='" + color + "' class='form-control' />");
                var deleteButton = $("<div class='input-group-append'><button type='button' class='btn btn-outline-danger deleteColor' data-index='" + index + "'>X</button></div>");

                colorInputGroup.append(newColorInput);
                colorInputGroup.append(deleteButton);
                colorInputGroup.appendTo("#colorInputs");
            }

            $("#addColor").click(function () {
                // Add a new color input
                addColorInput(colorIndex, "#000000");
                colorIndex++;
            });

            // Event delegation for dynamically added elements
            $("#colorInputs").on("click", ".deleteColor", function () {
                // Remove the color input and the associated delete button
                $(this).closest(".color-input-group").remove();
                colorIndex = Math.max(colorIndex - 1, 1); // Ensure colorIndex doesn't go below 1
            });
        });
    </script>
}

<style>
    .color-input-group {
        margin-bottom: 10px;
    }

    .deleteColor {
        cursor: pointer;
    }

    input[type="color"] {
        padding: 0;
        border: none;
        width: 40px;
        height: 40px;
        margin-right: 5px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }
</style>
*@